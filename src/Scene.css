/*Global Styles */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  /* Prevent scrolling on the main page */
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
  overflow: hidden;
  color: #334155; 
  background-color: #f8fafc; 
}


.scene-container {
  width: 100vw;
  height: 100vh;
  height: 100dvh;
  position: relative;
  overflow: hidden;
}

.world {
  position: relative;
  z-index: 2;
  width: 100%;
  height: 100%;
}

.walker {
  position: absolute;
  bottom: 18%;
  width: 520px;
  max-width: 92%;
  z-index: 2;
  transition: transform 0.3s ease;
}

/* Handles all the Animations */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideInLeft {
  from { opacity: 0; transform: translateX(-40px); }
  to   { opacity: 1; transform: translateX(0); }
}

@keyframes slideInRight {
  from { opacity: 0; transform: translateX(20px); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes softFadeUp {
  from { opacity: 0; transform: translateY(10px); }
  to   { opacity: 1; transform: translateY(0); }
}

@keyframes liftBrightness {
  0%   { filter: brightness(0.25) saturate(0.65) blur(8px); }
  100% { filter: brightness(1)     saturate(1)     blur(0);   }
}

@keyframes vignetteFade {
  0%   { opacity: 1; }
  100% { opacity: 0; visibility: hidden; }
}

@keyframes bloomPulse {
  0%   { opacity: 0;   transform: scale(0.9); }
  30%  { opacity: 0.45; transform: scale(1.05); }
  100% { opacity: 0;   transform: scale(1.4); }
}

@keyframes grainDrift {
  0%   { transform: translate3d(0,0,0); }
  100% { transform: translate3d(-20px, -15px, 0); }
}

@keyframes zoomIn {
  from { transform: scale(2); }
  to { transform: scale(1.3); }
}

@keyframes walkForward {
  to { transform: translateX(calc(100vw + 50vw)); }
}

@keyframes walkBackward {
  to { transform: scaleX(-1) translateX(calc(100vw + 30vw)); }
}

@keyframes walkManToPos { from { right: -30vw; } to { right: 40%; } }
@keyframes walkFriendToPos { from { left: -30vw; } to { left: 40%; } }

@keyframes messageAppear {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Makes sure that the splitscreen layout is proper */
@media (max-width: 1000px) {
  .split-scene {
    flex-direction: column !important;
    height: 100vh !important;
    height: 100dvh !important;
    width: 100vw !important;
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    overflow: hidden !important;
    z-index: 10 !important;
  }

  .story-surface {
    width: 100% !important;
    height: 45vh !important;
    height: 45dvh !important;
    padding: 1.5rem; 
    overflow-y: auto;
    flex-shrink: 0 !important;
    position: relative !important;
  }

  .chat-surface {
    width: 100% !important;
    height: 55vh !important;
    height: 55dvh !important;
    border-radius: 1.5rem 1.5rem 0 0 !important; 
    border-left: none !important;
    border-top: 1px solid #e2e8f0 !important; 
    position: relative !important;
    bottom: auto !important;
    left: auto !important;
    right: auto !important;
    top: auto !important;
    transform: none !important;
    margin: 0 !important;
    flex-shrink: 0 !important;
    flex-grow: 0 !important;
    max-height: 55vh !important;
    max-height: 55dvh !important;
    min-height: 55vh !important;
    min-height: 55dvh !important;
  }

  .friend-bubble {
    position: relative;
    bottom: auto ;
    left: auto ;
    transform: none ;
    max-width: 90% ;
    margin: 1rem auto; 
  }
}
